* Merging local inference and full spec inference
  The following things need to be added to the full spec inference
  code:

** DONE Return an expression -> ctype map
   And change solve to apply the solution to the map.
*** TODO Merge common envs into products
    loc can totally be rolled into env; it's just as static as everything else
    there and always present
** TODO Emit dynamic checks like localInfer
   These should be coming out of inferindices.
** TODO Pull final type checks from localInfer into inferctypes
** TODO Use sub for ctvemap, block annots rather than pushing through solve
** TODO Get all regrtests running
** TODO Cheerily delete the localInfer code and merge
** TODO Don't return an env from local shape inference; it never changes
** TODO Add annotation support for __array__ attribute types
** TODO Can we cut down code duplication...
*** TODO ...by lifting things like apply_unop? (i.e., adding a "lift to const" op?)
